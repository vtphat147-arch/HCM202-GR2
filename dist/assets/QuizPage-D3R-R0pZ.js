import{j as e,f as k}from"./index-CeETfnj8.js";import{b as c,q as B,s as A,t as G,p as b,u as L,v as S,n as T}from"./vendor-Coc8YaK4.js";import"./gemini-nZvJrMcm.js";const X=({region:d,language:m,onBack:g})=>{const[i,u]=c.useState([]),[I,h]=c.useState(!0),[r,f]=c.useState(0),[o,j]=c.useState({}),[N,w]=c.useState(!1),[y,Q]=c.useState(0),s=m==="vi",t={loading:s?`Đang để AI soạn bộ đề thi về ${d.name}...`:`AI is generating quiz for ${d.name}...`,title:s?"Thử Thách Kiến Thức":"Knowledge Challenge",subtitle:d.name,question:s?"Câu hỏi":"Question",next:s?"Tiếp theo":"Next",finish:s?"Nộp bài & Xem điểm":"Submit & Check Score",perfect:s?"Xuất sắc! Bạn là nhà ngoại giao tài ba!":"Excellent! You are a master diplomat!",good:s?"Rất tốt! Bạn có kiến thức vững chắc.":"Very good! Solid knowledge.",average:s?"Khá tốt. Hãy ôn lại thêm nhé.":"Not bad. Review a bit more.",poor:s?"Cần cố gắng thêm.":"Keep trying.",review:s?"Chi tiết đáp án":"Answer Review",yourAns:s?"Bạn chọn:":"You chose:",correctAns:s?"Đáp án đúng:":"Correct answer:",explain:s?"Giải thích:":"Explanation:",back:s?"Quay lại bản đồ":"Back to Map",retry:s?"Làm bộ đề mới":"New Quiz"};c.useEffect(()=>{(async()=>{h(!0);const l=await k(d.name,m);u(l),h(!1)})()},[d.name,m]);const $=a=>{N||j(l=>({...l,[r]:a}))},R=()=>{r<i.length-1&&f(a=>a+1)},z=()=>{let a=0;i.forEach((l,n)=>{o[n]===l.correctAnswerIndex&&a++}),Q(a),w(!0)},E=()=>{w(!1),j({}),f(0),h(!0),k(d.name,m).then(a=>{u(a),h(!1)})};if(I)return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-diplomatic-200 border-t-gold-500 rounded-full animate-spin mb-6"}),e.jsx("h2",{className:"text-xl font-bold text-diplomatic-900 animate-pulse text-center",children:t.loading}),e.jsx("p",{className:"text-gray-500 mt-2 text-center text-sm max-w-md",children:"Gemini AI đang tổng hợp dữ liệu lịch sử và sự kiện mới nhất..."})]});if(N){const a=Math.round(y/i.length*100);let l=t.poor;return a===100?l=t.perfect:a>=80?l=t.good:a>=50&&(l=t.average),e.jsx("div",{className:"min-h-screen bg-slate-50 py-8 px-4 animate-fade-in",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 text-center border-t-8 border-diplomatic-900 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:e.jsx(B,{className:"w-40 h-40 text-gold-500"})}),e.jsx("h2",{className:"text-3xl font-serif font-bold text-diplomatic-900 mb-2",children:t.subtitle}),e.jsx("p",{className:"text-gray-500 mb-6 uppercase tracking-wider text-sm",children:t.title}),e.jsx("div",{className:"inline-block p-6 rounded-full bg-diplomatic-50 mb-4 ring-4 ring-diplomatic-100",children:e.jsxs("span",{className:`text-5xl font-bold ${a>=80?"text-green-600":a>=50?"text-gold-600":"text-red-500"}`,children:[y,"/",i.length]})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-6",children:l}),e.jsxs("div",{className:"flex justify-center gap-4 flex-wrap",children:[e.jsxs("button",{onClick:g,className:"px-6 py-2 rounded-lg bg-gray-200 text-gray-700 font-bold hover:bg-gray-300 transition flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"})," ",t.back]}),e.jsxs("button",{onClick:E,className:"px-6 py-2 rounded-lg bg-diplomatic-900 text-white font-bold hover:bg-diplomatic-800 transition flex items-center gap-2 shadow-lg hover:shadow-xl",children:[e.jsx(G,{className:"w-4 h-4"})," ",t.retry]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h3",{className:"text-xl font-bold text-diplomatic-900 border-b pb-2",children:t.review}),i.map((n,p)=>{const x=o[p]===n.correctAnswerIndex,C=o[p];return e.jsxs("div",{className:`bg-white rounded-xl shadow-sm border-l-4 p-6 ${x?"border-green-500":"border-red-500"}`,children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsx("span",{className:`flex-shrink-0 w-8 h-8 flex items-center justify-center rounded-full font-bold text-white text-sm ${x?"bg-green-500":"bg-red-500"}`,children:p+1}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:n.question})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:`p-3 rounded-lg border ${x?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[e.jsx("span",{className:"text-xs font-bold uppercase block mb-1 opacity-70",children:t.yourAns}),e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[x?e.jsx(b,{className:"w-4 h-4 text-green-600"}):e.jsx(L,{className:"w-4 h-4 text-red-600"}),C!==void 0?n.options[C]:"(Không trả lời)"]})]}),!x&&e.jsxs("div",{className:"p-3 rounded-lg border bg-blue-50 border-blue-200",children:[e.jsx("span",{className:"text-xs font-bold uppercase block mb-1 opacity-70",children:t.correctAns}),e.jsxs("div",{className:"flex items-center gap-2 font-medium text-blue-900",children:[e.jsx(b,{className:"w-4 h-4"}),n.options[n.correctAnswerIndex]]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg text-sm text-gray-700 flex gap-2",children:[e.jsx(S,{className:"w-5 h-5 text-gold-500 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-bold mr-1",children:t.explain}),n.explanation]})]})]},n.id)})]})]})})}if(i.length===0)return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4",children:[e.jsx(S,{className:"w-16 h-16 text-red-500 mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:s?"Hệ thống AI đang bận":"AI System Busy"}),e.jsx("p",{className:"text-gray-600 mb-6 text-center max-w-md",children:s?"Hiện tại Gemini AI đang quá tải hoặc đã hết hạn mức sử dụng miễn phí. Vui lòng quay lại sau.":"Gemini AI is currently overloaded or free quota exceeded. Please try again later."}),e.jsx("button",{onClick:g,className:"px-6 py-2 rounded-lg bg-diplomatic-900 text-white font-bold hover:bg-diplomatic-800 transition",children:t.back})]});const v=i[r],K=r===i.length-1,q=(r+1)/i.length*100;return e.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[e.jsx("header",{className:"bg-white shadow-sm p-4 sticky top-0 z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[e.jsx("button",{onClick:g,className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition",children:e.jsx(A,{className:"w-6 h-6"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"font-bold text-diplomatic-900 uppercase text-sm tracking-wider",children:t.title}),e.jsx("p",{className:"text-gold-600 font-bold text-lg",children:d.name})]}),e.jsx("div",{className:"w-10"})," "]})}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-3xl shadow-xl overflow-hidden animate-fade-in-up",children:[e.jsx("div",{className:"bg-gray-100 h-2 w-full",children:e.jsx("div",{className:"bg-gold-500 h-full transition-all duration-500 ease-out",style:{width:`${q}%`}})}),e.jsxs("div",{className:"p-8 md:p-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("span",{className:"text-sm font-bold text-gray-400 uppercase tracking-widest",children:[t.question," ",r+1," / ",i.length]}),e.jsx("span",{className:"text-xs px-2 py-1 bg-diplomatic-100 text-diplomatic-800 rounded font-bold",children:"10 Points"})]}),e.jsx("h2",{className:"text-2xl md:text-3xl font-serif font-bold text-gray-800 mb-8 leading-snug",children:v.question}),e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-8",children:v.options.map((a,l)=>e.jsxs("button",{onClick:()=>$(l),className:`p-4 md:p-5 rounded-xl border-2 text-left transition-all duration-200 flex items-center gap-4 group ${o[r]===l?"border-diplomatic-900 bg-diplomatic-50 shadow-md transform scale-[1.01]":"border-gray-100 hover:border-gold-400 hover:bg-yellow-50"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center font-bold text-sm transition-colors ${o[r]===l?"bg-diplomatic-900 border-diplomatic-900 text-white":"border-gray-300 text-gray-400 group-hover:border-gold-400 group-hover:text-gold-500"}`,children:String.fromCharCode(65+l)}),e.jsx("span",{className:`font-medium text-lg ${o[r]===l?"text-diplomatic-900":"text-gray-600"}`,children:a})]},l))}),e.jsx("div",{className:"flex justify-end pt-4 border-t border-gray-100",children:K?e.jsxs("button",{onClick:z,disabled:o[r]===void 0,className:"px-8 py-3 bg-gradient-to-r from-gold-500 to-yellow-600 text-white rounded-xl font-bold shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[t.finish," ",e.jsx(b,{className:"w-5 h-5"})]}):e.jsxs("button",{onClick:R,disabled:o[r]===void 0,className:"px-8 py-3 bg-diplomatic-900 text-white rounded-xl font-bold shadow-lg hover:bg-diplomatic-800 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[t.next," ",e.jsx(T,{className:"w-5 h-5"})]})})]})]})})]})};export{X as default};
